## Introduction ‚ú®
L'√©quipe de projet `The World (Taylor's Version)` est compos√©e de quatres personnes : Marielle CHARON, Kevin HERNANDEZ, Anouchka NEVEU et Amadou ISSAKA AMADOU. Le but de ce projet est de r√©pondre √† plusieurs questions sur le th√®me de la musique et plus pr√©cisement sur les platformes Spotify et Youtube grace √† la visualisation de donn√©es. Le projet sera d√©velopp√© sous R.

## Donn√©es üí°
Le dataset utilis√© (`Datasetfinal.csv`) est un merge de deux datasets : [Spotify and Youtube](https://www.kaggle.com/datasets/salvatorerastelli/spotify-and-youtube) et [Spotify songs](https://www.kaggle.com/datasets/sujaykapadnis/spotify-songs). Le merge final p√®se 6.55 MB et est sous format CSV. Il contient 3668 √©l√©ments. La cl√© qui a servi au merge est l'ID de la musique sur Spotify.

Les deux jeux de donn√©es contiennent des donn√©es datant de **2023** collect√©es depuis les API officielles de YouTube et Spotify. On a, notamment, les 10 musiques les plus populaires d'une vari√©t√© d'artistes.

> Il poss√®de √† l'heure actuelle 50 features, avant cleaning de celles pertinentes.
<br>
On regroupe les features sous ces cat√©gories :
<br><br>

| Cat√©gorie | Features associ√©es |
| --- | --- |
| Informations g√©n√©rales | artist, track_name, album, album_type, duration_ms, channel, description, track_album_release_date, ... |
| Scores musicaux | danceability, energy, key, loudness, acousticness, instrumentalness, liveness, valence, tempo |
| Popularit√© | views, likes, comments, stream, track_popularity |
| Variables suppl√©mentaires | uri (Spotify ID), url_spotify, url_youtube, licensed, ... |

> Les variables suppl√©mentaires n'expliquent pas la donn√©e pour l'analyse, mais sont utilis√©es pour structurer le dataset.
<br>
Les features se r√©partissent selon plusieurs types : nominales (nom de l'artiste/musique/album, ...), discr√®tes (tonalit√©) ou continues (scores musicaux).


```{r, echo=FALSE, include=FALSE}
# DATASET CLEANING AND PRACTICAL CODE


# library import
library(ggplot2)
library(readr)
library(dplyr)
library(forcats)
library(devtools)
library(palettetown)

# import dataset
data <- read_csv("data/datasetfinal.csv")
data <- data.frame(data)

# clean dataset
data <- data %>%
  select(-c(playlist_name, playlist_id, Url_spotify, Url_youtube, Title, Duration_ms, Danceability, Energy, Key, Loudness, Speechiness, Acousticness, Instrumentalness, Liveness, Valence, Tempo, track_name, track_artist)) %>%   # remove useless features
  na.omit() %>%   # remove incomplete rows
  distinct(Uri, .keep_all = TRUE)   # remove duplicated rows
  

# add relevant features to dataset
data$total_streams <- data$Stream + data$Views
data <- arrange(data, desc(total_streams))
```

***

On r√©pond aux premi√®res questions :

> Quelles sont les chansons les plus populaires sur YouTube et Spotify ?

> Y a-t'il une corr√©lation entre les genres de musique et leur cl√© musicale ?

Dans le graphique ci-dessous, on voit les 15 chansons les plus √©cout√©es (streams cumul√©s sur YouTube et Spotify). On voit rapidement que *Ed Sheeran* domine le classement puisqu'il cumule 3 des 15 chansons les plus √©cout√©es.
‚ö†Ô∏è **CELA NE REPRESENTE PAS LES ARTISTES AVEC LE PLUS DE STREAMS TOTAUX CUMULES**

On d√©cide d'analyser ces musiques en fonction de leur cl√© musicale. Dans le dataset, chaque cl√© est associ√©e √† un entier selon [cet encodage](https://en.wikipedia.org/wiki/Pitch_class#:~:text=%5Bedit%5D-,Pitch%20class,-Pitch%0Aclass).
Globalement, plus une cl√© est √©lev√©e, plus une chanson a tendance √† √™tre a√Øgue. A l'inverse, une chanson √† cl√© basse sera plus grave.

Sur l'ensemble du dataset, la cl√© moyenne est :

```{r, echo=FALSE}
mean(data$key)
```
soit un *Fa*.


```{r, echo=FALSE}
# PLOT 1 : Top X songs from total streams (S and YT) by artist and key


# stacked bar plot
ggplot(head(data, 15), aes(fill = key, y = total_streams, x = fct_reorder(Artist, total_streams, sum))) + 
    geom_bar(position = "stack", stat = "identity") +
    geom_text(aes(label = Track), position = position_stack(vjust = 0.5), color = "white", size = 2) +
    ggtitle("Top 15 songs from total streams (S and YT) by artist and key") +
    ylab("Total streams (S and YT)") +
    xlab("Artist") +
    
    # turning the graph sideways and switching from scientific notation to regular notation for numbers
    coord_flip() +
    scale_y_continuous(labels = scales::comma)
```

Si on s'int√©resse uniquement aux 15 premi√®res chansons, la cl√© moyenne devient alors :

```{r, echo=FALSE}
mean(head(data,15)$key)
```
plus proche d'un *Mi* (soit une cl√© inf√©rieure).

```{r, echo=FALSE}
ggplot(data, aes(x = fct_reorder(playlist_genre, -key, mean), y = key, fill=fct_reorder(playlist_genre, key, mean))) +
    geom_boxplot() +
    scale_fill_poke(pokemon="Meganium", spread=14) +
    labs(fill = "Genre", x = "Genre", y = "Cl√©") +
    ggtitle("Whisket Plot of Key by Genre for all musics in dataset") +
    coord_flip()
```



En regardant les genres de toutes les musiques du dataset, on voit que le genre avec la cl√© m√©diane la plus √©lev√©e est le rap. Les genres les moins vari√©s en terme de de cl√©s musicales sont le rock et l'EDM (Electronic Dance Music).

‚ö†Ô∏è Il est √† noter que la classification du genre des musiques dans le dataset peut parfois √™tre hasardeuse.

